<!DOCTYPE html>
<html lang="en">
<head>
    <title>MycoCode Download</title>
    <script>
        function downloadPDF(count, start, initials) {
            count = parseInt(count);
            start = parseInt(start);

            // Make AJAX request to your Java backend
            //fetch('/generate-pdf?param=' + param)
            fetch('/generate-pdf?count=' + count + '&start=' + start + '&initials=' + initials)
//            fetch('/generate-pdf?count=' + param)
                .then(response => response.blob())
                .then(blob => {
                    // Create a temporary link element
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = 'qr_slips.pdf'; // Set the download filename
                    // Programmatically click the link
                    link.click();
                    // Clean up the temporary link
                    URL.revokeObjectURL(link.href);
                })
                .catch(error => {
                    console.error('Error downloading PDF:', error);
                });
        }
    </script>
</head>
<body>
<img src="logo.jpg" alt="MycoCode Logo" style="display: block; margin: 0 auto;">
<br>
<label for="initials">Personal Voucher Prefix (your name initials):</label>
<input type="text" id="initials" maxlength="3" pattern="[A-Za-z]{3}" value="JFK" required>
<!--input type="text" id="initials" maxlength="3" pattern="[A-Za-z]{3}" value="JFK"-->
<br>
<label for="start">Starting value:</label>
<input type="number" id="start" min="0" max="900" value="0">
<br>

<label for="slipCount">Number of Slips</label><select id="slipCount">
    <option value="24" selected>24</option>
    <option value="48">48</option>
    <option value="72">96</option>
</select>
<br>
<p>Slips per page:</p>
<input type="radio" id="slipsPerPage4" name="slipsPerPage" value="24" disabled checked>
<label for="slipsPerPage4">24</label>
<br>
<button onclick="downloadPDF(document.getElementById('slipCount').value,
        document.getElementById('start').value,
        document.getElementById('initials').value)">Download PDF</button>
<!-- button onclick="downloadPDF(3)">Download QR Slips</button -->
<br>
<hr>
<b>New!</b> Get QR slips for the <a href="mycoblitz.html">Continental Mycoblitz</a> or <a href="fundis.html">FunDIS</a> projects.

<hr>
<br>
<img src="personal-directions.png" alt="Directions guide">

</body>
</html>